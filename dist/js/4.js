webpackJsonp([4],{349:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=s(358),a=s(381),i=s(201),o=Object(i.a)(r.a,a.a,a.b,!1,null,null,null);o.options.__file="src\\component\\order.vue",e.default=o.exports},358:function(t,e,s){"use strict";var r=s(203),a=s.n(r);e.a={data:function(){return{totalCount:"",totalAmount:"",orderList:{},order:{accept_name:"廖路",area:{province:{code:44e4,value:"广东省"},city:{code:440300,value:"深圳市"},area:{code:440306,value:"宝安区"}},address:"中粮商务公园3栋17楼",mobile:"13317548748",email:"hejie@163.com",post_code:"518000",payment_id:"6",express_id:"1",message:"急用，请快点发货",expressMoment:20},rules:{accept_name:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],address:[{required:!0,message:"请输入收件人姓名",trigger:"blur"}],mobile:[{validator:function(t,e,s){if(!e)return s(new Error("手机号码不能为空"));/^[1][3,4,5,7,8][0-9]{9}$/.test(e)?s():s(new Error("手机号码非法"))},trigger:"blur"}],area:[{required:!0,message:"请选择所属地区",trigger:"blur"}]}}},created:function(){this.getOrderData()},computed:{getSum:function(){return this.totalAmount+this.order.expressMoment}},methods:{getOrderData:function(){var t=this;this.order.goodsids=this.$route.params.goodsId;var e=JSON.parse(localStorage.getItem("goodsData"));this.order.cargoodsobj=e;var s="site/validate/order/getgoodslist/"+this.$route.params.goodsId,r=this;this.$axios.get(s).then(function(s){var a=0,i=0;s.data.message.forEach(function(t){if(void 0==e[t.id])return void r.$router.push({path:"/site/goodsList"});t.buycount=e[t.id],a+=t.buycount,i+=t.buycount*t.sell_price}),t.totalCount=a,t.totalAmount=i,t.order.goodsAmount=i,t.orderList=s.data.message})},onSelected:function(t){this.order.area=t},switchExpress:function(t){switch(t){case"1":this.order.expressMoment=20;break;case"2":this.order.expressMoment=10;break;case"3":this.order.expressMoment=8}},goToOrder:function(){var t=this;this.$refs.orderForm.validate(function(e){if(!e)return!1;t.$axios.post("site/validate/order/setorder",t.order).then(function(e){if(0!=e.data.status)return void t.$message.error("评论失败");t.$route.params.goodsId.split(",").forEach(function(e){t.$store.commit("deleteGoods",e)}),t.$router.push({path:"/site/orderInfo/"+e.data.message.orderid})})})}},components:{VDistpicker:a.a}}},381:function(t,e,s){"use strict";s.d(e,"a",function(){return r}),s.d(e,"b",function(){return a});var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"section"},[s("div",{staticClass:"wrapper"},[s("div",{staticClass:"bg-wrap"},[t._m(1),t._v(" "),s("div",{staticClass:"cart-box"},[t._m(2),t._v(" "),s("div",{attrs:{id:"orderForm",name:"orderForm",url:""}},[s("el-form",{ref:"orderForm",staticClass:"demo-ruleForm",attrs:{model:t.order,rules:t.rules,"label-width":"150px","status-icon":""}},[s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"收件人姓名",prop:"accept_name"}},[s("el-input",{model:{value:t.order.accept_name,callback:function(e){t.$set(t.order,"accept_name",e)},expression:"order.accept_name"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"所属地区：",prop:"area"}},[s("v-distpicker",{attrs:{province:t.order.area.province.value,city:t.order.area.city.value,area:t.order.area.area.value},on:{selected:t.onSelected}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"详细地址",prop:"address"}},[s("el-input",{model:{value:t.order.address,callback:function(e){t.$set(t.order,"address",e)},expression:"order.address"}})],1),t._v(" "),s("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"手机号码",prop:"mobile"}},[s("el-input",{model:{value:t.order.mobile,callback:function(e){t.$set(t.order,"mobile",e)},expression:"order.mobile"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"电子邮箱："}},[s("el-input",{staticStyle:{width:"600px"},model:{value:t.order.email,callback:function(e){t.$set(t.order,"email",e)},expression:"order.email"}})],1),t._v(" "),s("el-form-item",{attrs:{label:"邮政编码："}},[s("el-input",{staticStyle:{width:"250px"},model:{value:t.order.post_code,callback:function(e){t.$set(t.order,"post_code",e)},expression:"order.post_code"}})],1)],1),t._v(" "),t._m(3),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("label",[s("el-radio",{attrs:{label:"6"},model:{value:t.order.payment_id,callback:function(e){t.$set(t.order,"payment_id",e)},expression:"order.payment_id"}},[t._v("在线支付")]),t._v(" "),s("em",[t._v("手续费：0.00元")])],1)])]),t._v(" "),t._m(4),t._v(" "),s("ul",{staticClass:"item-box clearfix"},[s("li",[s("el-radio-group",{on:{change:t.switchExpress},model:{value:t.order.express_id,callback:function(e){t.$set(t.order,"express_id",e)},expression:"order.express_id"}},[s("el-radio",{attrs:{label:"1"}},[t._v("顺丰快递(20.00元)")]),t._v(" "),s("el-radio",{attrs:{label:"2"}},[t._v("圆通快递(10.00元)")]),t._v(" "),s("el-radio",{attrs:{label:"3"}},[t._v("韵达快递(8.00元)")])],1)],1)]),t._v(" "),t._m(5),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),s("table",{staticClass:"cart-table",attrs:{width:"100%",border:"0",align:"center",cellpadding:"8",cellspacing:"0"}},[s("tbody",[t._m(6),t._v(" "),t._l(t.orderList,function(e){return s("tr",{key:e.id},[s("td",{attrs:{width:"68"}},[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[s("img",{staticClass:"img",attrs:{src:e.img_url}})])]),t._v(" "),s("td",[s("a",{attrs:{target:"_blank",href:"/goods/show-89.html"}},[t._v(t._s(e.title))])]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                              ￥"+t._s(e.sell_price)+"\n                                          ")])]),t._v(" "),s("td",{attrs:{align:"center"}},[t._v(t._s(e.buycount))]),t._v(" "),s("td",[s("span",{staticClass:"red"},[t._v("\n                                              ￥"+t._s(e.buycount*e.sell_price)+"\n                                          ")])])])})],2)]),t._v(" "),s("div",{staticClass:"line15"}),t._v(" "),t._m(7),t._v(" "),s("div",{staticClass:"buy-foot clearfix"},[s("div",{staticClass:"left-box"},[s("dl",[s("dt",[t._v("订单备注(100字符以内)")]),t._v(" "),s("dd",[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.order.message,expression:"order.message"}],staticClass:"input",staticStyle:{height:"35px"},attrs:{name:"message"},domProps:{value:t.order.message},on:{input:function(e){e.target.composing||t.$set(t.order,"message",e.target.value)}}})])])]),t._v(" "),s("div",{staticClass:"right-box"},[s("p",[t._v("\n                                      商品\n                                      "),s("label",{staticClass:"price"},[t._v(t._s(t.totalCount))]),t._v(" 件     商品金额：￥\n                                      "),s("label",{staticClass:"price",attrs:{id:"goodsAmount"}},[t._v(t._s(t.totalAmount))]),t._v(" 元    \n                                  ")]),t._v(" "),s("p",[t._v("\n                                      运费：￥\n                                      "),s("label",{staticClass:"price",attrs:{id:"expressFee"}},[t._v(t._s(t.order.expressMoment))]),t._v(" 元\n                                  ")]),t._v(" "),s("p",{staticClass:"txt-box"},[t._v("\n                                      应付总金额：￥\n                                      "),s("label",{staticClass:"price",attrs:{id:"totalAmount"}},[t._v(t._s(t.getSum))])]),t._v(" "),s("p",{staticClass:"btn-box"},[s("a",{staticClass:"btn button",attrs:{href:"/cart.html"}},[t._v("返回购物车")]),t._v(" "),s("a",{staticClass:"btn submit",attrs:{id:"btnSubmit"},on:{click:t.goToOrder}},[t._v("确认提交")])])])])],1)])])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"section"},[s("div",{staticClass:"location"},[s("span",[t._v("当前位置：")]),t._v(" "),s("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n              "),s("a",{attrs:{href:"/cart.html"}},[t._v("购物车")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart-head clearfix"},[s("h2",[s("i",{staticClass:"iconfont icon-cart"}),t._v("我的购物车")]),t._v(" "),s("div",{staticClass:"cart-setp"},[s("ul",[s("li",{staticClass:"first active"},[s("div",{staticClass:"progress"},[s("span",[t._v("1")]),t._v("\n                                      放进购物车\n                                  ")])]),t._v(" "),s("li",{staticClass:"active"},[s("div",{staticClass:"progress"},[s("span",[t._v("2")]),t._v("\n                                      填写订单信息\n                                  ")])]),t._v(" "),s("li",{staticClass:"last"},[s("div",{staticClass:"progress"},[s("span",[t._v("3")]),t._v("\n                                      支付/确认订单\n                                  ")])])])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"slide-tit"},[s("span",[t._v("1、收货地址")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"slide-tit"},[s("span",[t._v("2、支付方式")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"slide-tit"},[s("span",[t._v("3、配送方式")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"slide-tit"},[s("span",[t._v("4、商品清单")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("tr",[s("th",{attrs:{colspan:"2",align:"left"}},[t._v("商品信息")]),t._v(" "),s("th",{attrs:{width:"84",align:"left"}},[t._v("单价")]),t._v(" "),s("th",{attrs:{width:"84",align:"center"}},[t._v("购买数量")]),t._v(" "),s("th",{attrs:{width:"104",align:"left"}},[t._v("金额(元)")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("h2",{staticClass:"slide-tit"},[s("span",[t._v("5、结算信息")])])}];r._withStripped=!0}});