webpackJsonp([0],{347:function(t,i,e){"use strict";function n(t){r||e(364)}Object.defineProperty(i,"__esModule",{value:!0});var s=e(354),o=e(373),a=e(201),r=!1,l=n,c=Object(a.a)(s.a,o.a,o.b,!1,l,null,null);c.options.__file="src\\component\\goodsInfo.vue",i.default=c.exports},354:function(t,i,e){"use strict";(function(t){var n=e(368),s=e(372);e.n(s);i.a={data:function(){return{goods:{},num:1,isShowcomment:!1,pageIndex:1,pageSize:2,commentlist:{},isShowAnimateImg:!1,addToShopCartOffset:null,shoppingCartCountOffset:null}},components:{Affix:n.a},watch:{$route:function(t,i){this.getinfoData(),this.getCommentContent()}},updated:function(){t("#magnifier1").imgzoon({magnifier:"#magnifier1"})},created:function(){this.getinfoData(),this.getCommentContent()},methods:{getinfoData:function(){var i=this,e="site/goods/getgoodsinfo/"+this.$route.params.goodsId;this.$axios.get(e).then(function(e){i.goods=e.data.message,setTimeout(function(){i.addToShopCartOffset=t(i.$refs.addToShopCartRef).offset(),t(i.$refs.animateImgRef).css({left:i.addToShopCartOffset.left,top:i.addToShopCartOffset.top}),i.shoppingCartCountOffset=t("#shoppingCartCount").offset()},200)}).catch(function(t){})},getCommentContent:function(){var t=this,i="site/comment/getbypage/goods/"+this.$route.params.goodsId+"?pageIndex="+this.pageIndex+"&pageSize="+this.pageSize;this.$axios.get(i).then(function(i){t.commentlist=i.data}).catch(function(t){})},handleSizeChange:function(t){this.pageIndex=1,this.pageSize=t,this.getCommentContent()},handleCurrentChange:function(t){this.pageIndex=t,this.getCommentContent()},postComment:function(){var t=this,i=this.$refs.postcommentref.value;if(0==i.trim().length)return void this.$message({message:"请输入内容",type:"warning"});var e="site/validate/comment/post/goods/"+this.$route.params.goodsId;this.$axios.post(e,{commenttxt:i}).then(function(i){0!=i.data.status&&t.$message({message:"评论失败",type:"warning"}),t.$refs.postcommentref.value="",t.$message({message:"评论成功",type:"success"}),t.pageIndex=1,t.getCommentContent()})},addToShopCar:function(){this.isShowAnimateImg=!0;var t={goodsId:this.$route.params.goodsId,count:this.num};this.$store.commit("addGoods",t)},beforeEnter:function(t){t.style.left=this.addToShopCartOffset.left+"px",t.style.top=this.addToShopCartOffset.top+"px",t.style.transform="scale(1)"},enter:function(t,i){t.offsetWidth,t.style.left=this.shoppingCartCountOffset.left+"px",t.style.top=this.shoppingCartCountOffset.top+"px",t.style.transform="scale(0.5)",i()},afterEnter:function(t){this.isShowAnimateImg=!1}}}}).call(i,e(49))},355:function(t,i,e){"use strict";function n(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}function s(t,i){var e=i?"pageYOffset":"pageXOffset",n=i?"scrollTop":"scrollLeft",s=t[e];return"number"!=typeof s&&(s=window.document.documentElement[n]),s}function o(t){var i=t.getBoundingClientRect(),e=s(window,!0),n=s(window),o=window.document.body,a=o.clientTop||0,r=o.clientLeft||0;return{top:i.top+e-a,left:i.left+n-r}}var a=e(370);i.a={name:"Affix",props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number}},data:function(){return{affix:!1,styles:{},slot:!1,slotStyle:{}}},computed:{offsetType:function(){var t="top";return this.offsetBottom>=0&&(t="bottom"),t},classes:function(){return[n({},"ivu-affix",this.affix)]}},mounted:function(){Object(a.b)(window,"scroll",this.handleScroll),Object(a.b)(window,"resize",this.handleScroll)},beforeDestroy:function(){Object(a.a)(window,"scroll",this.handleScroll),Object(a.a)(window,"resize",this.handleScroll)},methods:{handleScroll:function(){var t=this.affix,i=s(window,!0),e=o(this.$el),n=window.innerHeight,a=this.$el.getElementsByTagName("div")[0].offsetHeight;e.top-this.offsetTop<i&&"top"==this.offsetType&&!t?(this.affix=!0,this.slotStyle={width:this.$refs.point.clientWidth+"px",height:this.$refs.point.clientHeight+"px"},this.slot=!0,this.styles={top:this.offsetTop+"px",left:e.left+"px",width:this.$el.offsetWidth+"px"},this.$emit("on-change",!0)):e.top-this.offsetTop>i&&"top"==this.offsetType&&t&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),e.top+this.offsetBottom+a>i+n&&"bottom"==this.offsetType&&!t?(this.affix=!0,this.styles={bottom:this.offsetBottom+"px",left:e.left+"px",width:this.$el.offsetWidth+"px"},this.$emit("on-change",!0)):e.top+this.offsetBottom+a<i+n&&"bottom"==this.offsetType&&t&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}}},364:function(t,i,e){var n=e(365);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var s=e(202).default;s("61d2507c",n,!1,{})},365:function(t,i,e){i=t.exports=e(48)(!1),i.i(e(366),""),i.push([t.i,"\n.animateImg {\n    height: 50px;\n    width: 50px;\n    position: absolute;\n    top: 0;\n    left: 0;\n    transition: all .5s;\n}\n.animateImg img {\n    width: 100%;\n    height: 100%;\n}\n",""])},366:function(t,i,e){var n=e(204);i=t.exports=e(48)(!1),i.push([t.i,'@charset "utf-8";\r\n*{\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n}\r\nul li{\r\n\tlist-style: none;\r\n}\r\nimg{\r\n\tborder: 0;\r\n}\r\n/* 垂直居中 */\r\n.small-img{\r\n\tdisplay: flex;\r\n\talign-items:center;\r\n\tjustify-content: center;\r\n}\r\n.clearfix:before,\r\n.clearfix:after{\r\n  display: table;\r\n  line-height: 0;\r\n  content: "";\r\n}\r\n.magnifier{\r\n\twidth: 368px;\r\n\tposition: relative;\r\n\t\r\n}\r\n.magnifier-container{\r\n\twidth: 368px;\r\n\theight: 368px;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\tborder: 1px solid #ddd;\r\n}\r\n.move-view{\r\n\twidth: 100px;\r\n\theight: 100px;\r\n\tposition: absolute;\r\n\tbackground-image: url('+n(e(367))+');\r\n}\r\n.images-cover{\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\tposition: relative;\r\n}\r\n.images-cover img{\r\n\tposition: absolute;\r\n}\r\n.magnifier-assembly{\r\n\theight: 92px;\r\n\toverflow: hidden;\r\n\tposition: relative;\r\n\tpadding-left: 30px;\r\n\tpadding-right: 30px;\r\n}\r\n.magnifier-btn{\r\n\tposition: absolute;\r\n\tfont-family: "\\5B8B\\4F53";\r\n\twidth: 100%;\r\n\ttop: 50%;\r\n\tleft: 0;\r\n\tmargin-top: -40px;\r\n}\r\n.magnifier-btn span{\r\n\tline-height: 80px;\r\n\theight: 80px;\r\n\twidth: 20px;\r\n\tbackground-color: #6e6e6e;\r\n\tcolor: #fff;\r\n\tdisplay: block;\r\n\tz-index: 9998;\r\n\ttext-align: center;\r\n\tfont-size: 20px;\r\n\tcursor: pointer;\r\n\tborder-radius: 3px;\r\n}\r\n.magnifier-btn .magnifier-btn-left{\r\n\tfloat: left;\r\n}\r\n.magnifier-btn .magnifier-btn-right{\r\n\tfloat: right;\r\n}\r\n.magnifier-line{\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n\theight: 92px;\r\n}\r\n.magnifier-line ul{\r\n\tdisplay: block;\r\n\tfont-size: 0;\r\n\twidth: 10000%;\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\tz-index: 9997;\r\n}\r\n.magnifier-line li{\r\n\tfloat: left;\r\n\twidth: 100px;\r\n\tcursor: pointer;\r\n}\r\n.magnifier-line ul > .active .small-img{\r\n\tborder-color: #bbb;\r\n}\r\n.small-img{\r\n\theight: 78px;\r\n\tpadding: 1px;\r\n\tmargin: 5px;\r\n\toverflow: hidden;\r\n\tborder: 1px solid #ddd;\r\n\ttext-align: center;\r\n}\r\n.small-img img{\r\n\tmax-width: 100%;\r\n\tmax-height: 100%;\r\n}\r\n.magnifier-view{\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tposition: absolute;\r\n\tright: -105%;\r\n\ttop: 0;\r\n\tz-index: 9999;\r\n\tbackground-color: #fff;\r\n\tdisplay: none;\r\n\toverflow: hidden;\r\n}\r\n.magnifier-view img{\r\n\tdisplay: block;\r\n}\r\n.animation03{\r\n\ttransition: all 0.3s ease-in 0.1s;\r\n\t-ms-transition: all 0.3s ease-in 0.1s;\r\n\t-moz-transition: all 0.3s ease-in 0.1s;\r\n\t-webkit-transition: all 0.3s ease-in 0.1s;\r\n\t-o-transition: all 0.3s ease-in 0.1s;\r\n}',""])},367:function(t,i,e){t.exports=e.p+"/static/img/move-box-929744ed.png"},368:function(t,i,e){"use strict";var n=e(369);i.a=n.a},369:function(t,i,e){"use strict";var n=e(355),s=e(371),o=e(201),a=Object(o.a)(n.a,s.a,s.b,!1,null,null,null);a.options.__file="node_modules\\_iview@2.14.0@iview\\src\\components\\affix\\affix.vue",i.a=a.exports},370:function(t,i,e){"use strict";var n=e(2);const s=n.default.prototype.$isServer,o=function(){return!s&&document.addEventListener?function(t,i,e){t&&i&&e&&t.addEventListener(i,e,!1)}:function(t,i,e){t&&i&&e&&t.attachEvent("on"+i,e)}}();i.b=o;const a=function(){return!s&&document.removeEventListener?function(t,i,e){t&&i&&t.removeEventListener(i,e,!1)}:function(t,i,e){t&&i&&t.detachEvent("on"+i,e)}}();i.a=a},371:function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return s});var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[e("div",{ref:"point",class:t.classes,style:t.styles},[t._t("default")],2),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.slot,expression:"slot"}],style:t.slotStyle})])},s=[];n._withStripped=!0},372:function(t,i,e){(function(t){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e={magnifier:".magnifier",container:".magnifier-container",containerImg:".images-cover",view:".magnifier-view",width:368,height:368,moveView:".move-view",moveWidth:null,zoom:3,thumbnail:".magnifier-line > ul",assembly:".magnifier-btn",index:0};t.fn.imgzoon=function(n){if("object"==(void 0===n?"undefined":i(n)))for(var s in n)e[s]=n[s];var o={};o.magnifier=t(e.magnifier),o.container=o.magnifier.find(e.container),o.view=o.magnifier.find(e.view),o.moveView=o.magnifier.find(e.moveView),o.thumbnail=o.magnifier.find(e.thumbnail),o.assembly=o.magnifier.find(e.assembly),o.containerImg=o.magnifier.find(e.containerImg);var a=o.containerImg;o.magnifier.css({width:e.width}),o.container.css({width:e.width,height:e.height}),o.view.css({width:e.width,height:e.height});var r,l;r=e.moveWidth?e.moveWidth:e.width/e.zoom,l=r,o.moveView.css({width:r,height:l});var c,d,f,m,h,g,p;o.eqImg=function(){function t(){0==i.width&&(i.onload=t);i.width>i.height?(h=e.width,g=i.height/(i.width/e.width)):(h=i.width/(i.height/e.width),g=e.width),a.empty().append('<img src="'+n+'" width="'+h+'" height="'+g+'" style="'+void 0+'" />'),p=e.width/r,o.view.empty().append('<img src="'+n+'" width="'+h*p+'" height="'+g*p+'" />'),c=(e.width-h)/2,d=e.width-c-r+1,f=(e.height-g)/2,m=e.height-f-l+1}var i=new Image,n=o.thumbnail.find("img").eq(e.index).attr("src");i.src=n;e.width,e.height;o.thumbnail.find(">*").removeClass("active").eq(e.index).addClass("active"),t()},o.eqImg(),o.moveFn=function(i){var n=i.clientX-o.magnifier.offset().left-r/2,s=i.clientY-o.magnifier.offset().top+t(document).scrollTop()-l/2,a=n>c?n<d?n:d:c,u=s>f?s<m?s:m:f;u=u>0?u>e.width-l?e.height-l:u:0,o.moveView.css({left:a,top:u,display:"block"});var v=(a-(e.width-h)/2)*p,x=(u-(e.height-g)/2)*p;o.view.css({display:"block"}).find("img").css({"margin-left":-v,"margin-top":-x})},o.container.on("mousemove",function(t){o.moveFn(t)}).on("mouseleave",function(){o.moveView.hide(),o.view.hide()});var u=o.thumbnail.find(">*"),v=u.length;o.imgMove=function(t){t?e.index++:e.index--;var i=Math.ceil(e.width/u.width()/2);if(v<i)return!1;e.index<0?e.index=0:e.index>v-i?e.index=v-i:e.index;var n=u.width()*e.index-u.width();o.thumbnail.css({left:(n>0?-n:0)+"px"})},o.assembly.find(">*").on("click",function(){o.imgMove(t(this).index())}),u.on("click",function(){e.index=t(this).index(),o.eqImg(),o.imgMove(e.index)}),o.setIndex=function(t){e.index=t||0},t.myimgzoomobj=o}}(t)}).call(i,e(49))},373:function(t,i,e){"use strict";e.d(i,"a",function(){return n}),e.d(i,"b",function(){return s});var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",[t._m(0),t._v(" "),t.goods.goodsinfo?e("div",{staticClass:"section"},[e("div",{staticClass:"wrapper clearfix"},[e("div",{staticClass:"wrap-box"},[e("div",{staticClass:"left-925"},[e("div",{staticClass:"goods-box clearfix"},[e("div",{staticClass:"pic-box"},[e("div",{staticClass:"magnifier",attrs:{id:"magnifier1"}},[t._m(1),t._v(" "),e("div",{staticClass:"magnifier-assembly"},[t._m(2),t._v(" "),e("div",{staticClass:"magnifier-line"},[e("ul",{staticClass:"clearfix animation03"},t._l(t.goods.imglist,function(t){return e("li",{key:t.id},[e("div",{staticClass:"small-img"},[e("img",{attrs:{src:t.thumb_path}})])])}))])]),t._v(" "),e("div",{staticClass:"magnifier-view"})])]),t._v(" "),e("div",{staticClass:"goods-spec"},[e("h1",[t._v(t._s(t.goods.goodsinfo.title))]),t._v(" "),e("p",{staticClass:"subtitle"},[t._v(t._s(t.goods.goodsinfo.sub_title))]),t._v(" "),e("div",{staticClass:"spec-box"},[e("dl",[e("dt",[t._v("货号")]),t._v(" "),e("dd",{attrs:{id:"commodityGoodsNo"}},[t._v(t._s(t.goods.goodsinfo.goods_no))])]),t._v(" "),e("dl",[e("dt",[t._v("市场价")]),t._v(" "),e("dd",[e("s",{attrs:{id:"commodityMarketPrice"}},[t._v(t._s(t.goods.goodsinfo.market_price))])])]),t._v(" "),e("dl",[e("dt",[t._v("销售价")]),t._v(" "),e("dd",[e("em",{staticClass:"price",attrs:{id:"commoditySellPrice"}},[t._v(t._s(t.goods.goodsinfo.sell_price))])])])]),t._v(" "),e("div",{staticClass:"spec-box"},[e("dl",[e("dt",[t._v("购买数量")]),t._v(" "),e("dd",[e("div",{staticClass:"stock-box"},[e("el-input-number",{attrs:{min:1,max:t.goods.goodsinfo.stock_quantity,size:"small"},model:{value:t.num,callback:function(i){t.num=i},expression:"num"}})],1),t._v(" "),e("span",{staticClass:"stock-txt"},[t._v("\n                                            库存\n                                            "),e("em",{attrs:{id:"commodityStockNum"}},[t._v(t._s(t.goods.goodsinfo.stock_quantity))]),t._v("件\n                                        ")])])]),t._v(" "),e("dl",[e("dd",[e("div",{staticClass:"btn-buy",attrs:{id:"buyButton"}},[e("button",{staticClass:"buy",attrs:{onclick:"cartAdd(this,'/',1,'/shopping.html');"}},[t._v("立即购买")]),t._v(" "),e("button",{ref:"addToShopCartRef",staticClass:"add",on:{click:t.addToShopCar}},[t._v("加入购物车")])])])])])])]),t._v(" "),e("div",{staticClass:"goods-tab bg-wrap",attrs:{id:"goodsTabs"}},[e("div",{staticClass:"tab-head",staticStyle:{position:"static",top:"517px",width:"925px"},attrs:{id:"tabHead"}},[e("Affix",[e("ul",[e("li",[e("a",{class:t.isShowcomment?"":"selected",attrs:{href:"javascript:;"},on:{click:function(i){t.isShowcomment=!t.isShowcomment}}},[t._v("商品介绍")])]),t._v(" "),e("li",[e("a",{class:t.isShowcomment?"selected":"",attrs:{href:"javascript:;"},on:{click:function(i){t.isShowcomment=!0}}},[t._v("商品评论")])])])])],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isShowcomment,expression:"!isShowcomment"}],staticClass:"tab-content entry",staticStyle:{display:"block"},domProps:{innerHTML:t._s(t.goods.goodsinfo.content)}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowcomment,expression:"isShowcomment"}],staticClass:"tab-content",staticStyle:{display:"block"}},[e("div",{staticClass:"comment-box"},[e("div",{staticClass:"form-box",attrs:{id:"commentForm",name:"commentForm"}},[t._m(3),t._v(" "),e("div",{staticClass:"conn-box"},[e("div",{staticClass:"editor"},[e("textarea",{ref:"postcommentref",attrs:{id:"txtContent",name:"txtContent",sucmsg:" ",datatype:"*10-1000",nullmsg:"请填写评论内容！"}}),t._v(" "),e("span",{staticClass:"Validform_checktip"})]),t._v(" "),e("div",{staticClass:"subcon"},[e("input",{staticClass:"submit",attrs:{id:"btnSubmit",name:"submit",type:"submit",value:"提交评论"},on:{click:t.postComment}}),t._v(" "),e("span",{staticClass:"Validform_checktip"})])])]),t._v(" "),e("ul",{staticClass:"list-box",attrs:{id:"commentList"}},[t.commentlist.totalcount<=0?e("p",{staticStyle:{margin:"5px 0px 15px 69px","line-height":"42px","text-align":"center",border:"1px solid rgb(247, 247, 247)"}},[t._v("暂无评论，快来抢沙发吧！")]):t._e(),t._v(" "),t._l(t.commentlist.message,function(i){return e("li",{key:i.id},[t._m(4,!0),t._v(" "),e("div",{staticClass:"inner-box"},[e("div",{staticClass:"info"},[e("span",[t._v(t._s(i.user_name))]),t._v(" "),e("span",[t._v(t._s(t._f("fmtData")(i.add_time,"YYYY-MM-DD HH:mm:ss")))])]),t._v(" "),e("p",[t._v(t._s(i.content))])])])})],2),t._v(" "),e("div",{staticClass:"page-box",staticStyle:{margin:"5px 0px 0px 62px"}},[e("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[2,5,10,20],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.commentlist.totalcount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])])]),t._v(" "),e("div",{staticClass:"left-220"},[e("div",{staticClass:"bg-wrap nobg"},[e("div",{staticClass:"sidebar-box"},[e("h4",[t._v("推荐商品")]),t._v(" "),e("ul",{staticClass:"side-img-list"},t._l(t.goods.hotgoodslist,function(i){return e("li",{key:i.id},[e("div",{staticClass:"img-box"},[e("router-link",{attrs:{to:"/site/goodsinfo/"+i.id}},[e("img",{attrs:{src:i.img_url}})])],1),t._v(" "),e("div",{staticClass:"txt-box"},[e("a",{attrs:{href:"#/site/goodsinfo/90"}},[t._v(t._s(i.title))]),t._v(" "),e("span",[t._v(t._s(t._f("fmtData")(i.add_time)))])])])}))])])])])])]):t._e(),t._v(" "),e("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[t.goods.imglist?e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowAnimateImg,expression:"isShowAnimateImg"}],ref:"animateImgRef",staticClass:"animateImg"},[e("img",{attrs:{src:t.goods.imglist[0].thumb_path,alt:""}})]):t._e()])],1)},s=[function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"section"},[e("div",{staticClass:"location"},[e("span",[t._v("当前位置：")]),t._v(" "),e("a",{attrs:{href:"/index.html"}},[t._v("首页")]),t._v(" >\n            "),e("a",{attrs:{href:"/goods.html"}},[t._v("购物商城")]),t._v(" >\n            "),e("a",{attrs:{href:"/goods/42/1.html"}},[t._v("商品详情")])])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"magnifier-container"},[e("div",{staticClass:"images-cover"}),t._v(" "),e("div",{staticClass:"move-view"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"magnifier-btn"},[e("span",{staticClass:"magnifier-btn-left"},[t._v("<")]),t._v(" "),e("span",{staticClass:"magnifier-btn-right"},[t._v(">")])])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"avatar-box"},[e("i",{staticClass:"iconfont icon-user-full"})])},function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"avatar-box"},[e("i",{staticClass:"iconfont icon-user-full"})])}];n._withStripped=!0}});